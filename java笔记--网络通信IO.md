## java笔记-->网络通信IO

### BIO

一个线程一个连接。需要程序自己调用内核去读取IO

优点：可以接受很多连接。

缺点：由于在没接收到数据时处于阻塞状态，浪费内存资源，cpu调度消耗，产生C10K问题

### NIO

可以一个线程多个连接，解决了BIO的C10K问题。需要程序自己调用内核去读取IO

优点：由于设置非阻塞，在接收或是没接收到数据时都会返回一个状态（没收到-1，收到返回客户端编号）。

缺点：由于接收每次遍历所有客户端（接收程序循环起来是高速地多次遍历所有），在只接收到少量客户端发送来数据时，频繁系统调用产生严重浪费。

### 多路复用

由系统提供的多路复用，可以将客户端的数量以及客户端的文件描述符传给内核，由内核进行遍历（省去了程序调用内核的这段时间）内核返回有传输的客户端的文件描述符，程序再去遍历返回回来的这些客户端文件描述符的内容。因此解决了NIO的缺点

注：如果程序自己读IO，那么无论是BIO、NIO还是下面所有种类的多路复用器都是同步的。除了windows的IOCP可以做到内核主动创建线程去接收，把内容复制到程序的内存空间

#### select型多路复用器

它是同步的多路复用器，需要程序自己调用内核去读取IO，只返回这些对象（文件描述符）是否有数据的状态。被限制在1024个客户端对象

#### poll型多路复用器

和select类似，但没有限制在1024个客户端对象（多少个取决于系统配置）

#### epoll型多路复用器

和poll类似，但是在内核开辟了第一次传递的客户端的数量和客户端的文件描述符，在没有变化的情况下不再需要反复传递这个值。因此除了第一次读取IO时和上面相同，后面流程变为：内核进行遍历，返回有传输数据的客户端的文件描述符